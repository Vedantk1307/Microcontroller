#include <ESP8266WiFi.h> 
#include <DHT.h> 
#define DHTPIN D2          
// Pin where the DHT11 is connected 
#define DHTTYPE DHT11      // DHT11 sensor 
const char* ssid = "Himanshu’s M53";          
// Your WiFi SSID 
const char* password = "Himanshu3";  // Your WiFi Password 
const char* host = "api.thingspeak.com"; 
const char* writeAPIKey = "X1Y2Z3A4B5C6D7E8"; 
DHT dht(DHTPIN, DHTTYPE); 
void setup() { 
Serial.begin(115200); 
delay(10); 
dht.begin(); 
Serial.println(); 
Serial.println("Connecting to WiFi..."); 
WiFi.begin(ssid, password); 
// Wait for connection 
while (WiFi.status() != WL_CONNECTED) { 
delay(500); 
Serial.print("."); 
} 
Serial.println(""); 
Serial.println("WiFi connected"); 
Serial.println("IP address: "); 
Serial.println(WiFi.localIP()); 
} 
void loop() { 
float humidity = dht.readHumidity(); 
float temperature = dht.readTemperature(); // Celsius 
// Check if any reads failed 
if (isnan(humidity) || isnan(temperature)) { 
Serial.println("Failed to read from DHT sensor!"); 
delay(2000); 
return; 
} 
Serial.print("Temperature: "); 
Serial.print(temperature); 
Serial.print(" °C "); 
Serial.print("Humidity: "); 
Serial.print(humidity); 
Serial.println(" %"); 
// Connect to ThingSpeak server 
WiFiClient client; 
if (!client.connect(host, 80)) { 
Serial.println("Connection failed"); 
delay(1000); 
return; 
} 
// Create the URL with your data 
String postStr = "api_key="; 
postStr += writeAPIKey; 
postStr += "&field1="; 
postStr += String(temperature); 
postStr += "&field2="; 
postStr += String(humidity); 
postStr += "\r\n\r\n"; 
client.print("POST /update HTTP/1.1\n"); 
client.print("Host: api.thingspeak.com\n"); 
client.print("Connection: close\n"); 
client.print("Content-Type: application/x-www-form-urlencoded\n"); 
client.print("Content-Length: "); 
client.print(postStr.length()); 
client.print("\n\n"); 
client.print(postStr); 
Serial.println("Data sent to ThingSpeak"); 
// Wait 20 seconds before next update (ThingSpeak rate limit) 
delay(20000); 
} 